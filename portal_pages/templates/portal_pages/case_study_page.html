{% extends "base.html" %}
{% load wagtailcore_tags wagtailimages_tags %}

{% block extra_css %}
{% image self.hero_image width-1000 as heroimagedata %}
<style>
  .hero-image
  {
    height: 200px;
    background-color: #bbb;
    width: 100%;
    min-height: {{ heroimagedata.height }}px;
    background-size: cover;
    background-image: url({{ heroimagedata.url }})
  }
</style>
{% endblock %}

{% block hero-image %}
<section class="hero-image" alt="{{ heroimagedata.alt }}">
    <div class="page-width">
        <h1>This is coming from the Case Study Page template. Do we need something here?</h1>
    </div>
</section>
{% endblock %}

{% block heading %}
  <div class="page-header">

    <div>
      <h4>Countries<h4>
      <p>
      {% for country in self.countries.all %}
        <a href="{% pageurl self.casestudy_index %}?country={{ country.country.name }}">
        {{ country.country.name }}
        </a>
      {% endfor %}
      </p>
    </div>

    <div>
      <h4>Focus Areas<h4>
      <p>
      {% for focus_area in self.focus_areas.all %}
        <a href="{% pageurl self.casestudy_index %}?focus_area={{ focus_area.focusarea.name }}">
        {{ focus_area.focusarea.name }}
        </a>
      {% endfor %}
      </p>
    </div>

    <div>
      <h4>Organizations<h4>
      <p>
      {% for organization in self.organizations.all %}
        <a href="{% pageurl self.casestudy_index %}?organization={{ organization.organization.name }}">
        {{ organization.organization.name }}
        </a>
      {% endfor %}
      </p>
    </div>

    <div>
      <h4>Tech Firms<h4>
      <p>
      {% for tech_firm in self.tech_firms.all %}
        <a href="{% pageurl self.casestudy_index %}?tech_firm={{ tech_firm.techfirm.name }}">
        {{ tech_firm.techfirm.name }}
        </a>
      {% endfor %}
      </p>
    </div>

    <h2>
      {{ self.title }}
      {% if self.date %}<small>{{ self.date }}</small>{% endif %}
    </h2>

  </div>
{% endblock %}

{% block content %}
  <div>This is where we put the rest of the case study page</div>
  <div>{{ self.summary|richtext }}</div>
{% endblock %}